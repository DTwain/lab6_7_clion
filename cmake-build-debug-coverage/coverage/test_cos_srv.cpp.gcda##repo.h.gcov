        -:    0:Source:D:/INFO 2/SEM 2/oop_lab_6_9/Headers/repo.h
        -:    0:Graph:D:\INFO 2\SEM 2\oop_lab_6_9\cmake-build-debug-coverage\CMakeFiles\lab6_7_clion.dir\teste\test_cos_srv.cpp.gcno
        -:    0:Data:D:\INFO 2\SEM 2\oop_lab_6_9\cmake-build-debug-coverage\CMakeFiles\lab6_7_clion.dir\teste\test_cos_srv.cpp.gcda
        -:    0:Runs:1
        -:    1://
        -:    2:// Created by obrej on 4/10/2024.
        -:    3://
        -:    4:
        -:    5:
        -:    6:
        -:    7:#ifndef LAB6_7_CLION_REPO_H
        -:    8:#define LAB6_7_CLION_REPO_H
        -:    9:
        -:   10:#include "carte.h"
        -:   11:#include <ostream>
        -:   12:#include <vector>
        -:   13:#include <map>
        -:   14:#include <string>
        -:   15:
        -:   16:using std::ostream;
        -:   17:using std::string;
        -:   18:using std::vector;
        -:   19:
        -:   20:class repo_abs{
        -:   21:public:
        -:   22:    virtual void add(const carte& carte_obj) = 0;
        -:   23:
        -:   24:    virtual void delete_book(const int& id) = 0;
        -:   25:
        -:   26:    virtual void modify_book(const carte& modified_book) = 0;
        -:   27:
        -:   28:    virtual const vector<carte> & get_all() = 0;
        -:   29:
function _ZN8repo_absD2Ev called 0 returned 0% blocks executed 0%
    #####:   30:    virtual ~repo_abs() = default;
        -:   31:};
        -:   32:
        -:   33:class repo : public repo_abs{
        -:   34:private:
        -:   35:    vector<carte> carte_vec;
        -:   36:    int id = 0;
        -:   37:    bool carte_in_repo(const int& id ) const;
        -:   38:    void incrementare_id();
        -:   39:public:
        -:   40:    repo() = default;
        -:   41:
        -:   42:    repo(const repo& other) = delete; // pt a bloca copierea
        -:   43:
function _ZN4repoD1Ev called 0 returned 0% blocks executed 0%
    #####:   44:    virtual ~repo() = default;
    %%%%%:   44-block  0
call    0 never executed
call    1 never executed
        -:   45:
        -:   46:    const int& get_id_for_next_book_to_be_added() const;
        -:   47:
        -:   48:    const vector<carte>& get_reference_from_vector() const;
        -:   49:
        -:   50:    virtual void add(const carte& carte_obj) override;
        -:   51:
        -:   52:    void add_pt_cos(const carte& obj_carte);
        -:   53:
        -:   54:    virtual void delete_book(const int& id) override;
        -:   55:
        -:   56:    virtual void modify_book(const carte& obj_carte) override;
        -:   57:
        -:   58:    void goleste_repo();
        -:   59:
        -:   60:    const carte& find_book_by_id(const int& id) const;
        -:   61:
        -:   62:    const vector<carte>& get_all() override;
        -:   63:
        -:   64:
        -:   65:    static bool sort_by_title(const carte& book1, const carte& book2);
        -:   66:    static bool sort_by_author(const carte& book1, const carte& book2);
        -:   67:    static bool sort_by_publication_year_and_gen(const carte& book1, const carte& book2);
        -:   68:
        -:   69:};
        -:   70:
        -:   71:class repo_file : public repo {
        -:   72:private:
        -:   73:    string filename;
        -:   74:    void write_to_file();
        -:   75:    void load_from_file();
        -:   76:public:
        -:   77:    repo_file(const string &filename): repo(), filename{ filename } {
        -:   78:        load_from_file();
        -:   79:    }
        -:   80:    ~repo_file() override = default;
        -:   81:
        -:   82:    void add(const carte& carte_obj) override{
        -:   83:        repo::add(carte_obj);
        -:   84:        write_to_file();
        -:   85:    }
        -:   86:    void delete_book(const int& id) override{
        -:   87:        repo::delete_book(id);
        -:   88:        write_to_file();
        -:   89:    }
        -:   90:    void modify_book(const carte& obj_carte) override{
        -:   91:        repo::modify_book(obj_carte);
        -:   92:        write_to_file();
        -:   93:    }
        -:   94:};
        -:   95:
        -:   96:class probability_repo: public repo_abs{
        -:   97:private:
        -:   98:    float probability;
        -:   99:    std::map<int, carte> lista_carti;
        -:  100:    void cat_de_norocos_esti();
        -:  101:public:
        -:  102:    vector<carte> lista;
        -:  103:
        -:  104:    probability_repo() = default;
        -:  105:
        -:  106:    probability_repo(const float& prob): probability{ prob } { lista_carti.clear(); }
        -:  107:
        -:  108:    void add(const carte& carte_obj) override;
        -:  109:
        -:  110:    void delete_book(const int& id) override;
        -:  111:
        -:  112:    void modify_book(const carte& modified_book) override;
        -:  113:
        -:  114:    const vector<carte>& get_all() override;
        -:  115:};
        -:  116:
        -:  117:class book_repo_exception : std::exception{
        -:  118:    string msg;
        -:  119:public:
        -:  120:    explicit book_repo_exception(string error_msg): msg{error_msg} {}
        -:  121:    friend ostream& operator<<(ostream& out, const book_repo_exception& ex);
        -:  122:};
        -:  123:
        -:  124:ostream& operator<<(ostream& out, const book_repo_exception& ex);
        -:  125:
        -:  126:#endif //LAB6_7_CLION_REPO_H
